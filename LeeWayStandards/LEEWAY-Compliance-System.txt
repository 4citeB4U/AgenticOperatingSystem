# ğŸ¯ LEEWAY Standards Compliance System - Setup Guide

## What This Does

Automatically audits your **entire codebase** to ensure every file follows LEEWAY standards:

âœ… **Detects Issues**:
- Missing LEEWAY headers
- Invalid TAG format (must be `DOMAIN.SUBDOMAIN.ASSET.PURPOSE`)
- Missing or invalid REGION assignment
- Missing DISCOVERY_PIPELINE blocks

âœ… **Auto-Fixes**:
- Generates compliant headers automatically
- Infers TAGs from file paths
- Assigns appropriate REGIONs
- Adds DISCOVERY_PIPELINE stubs

âœ… **Reporting**:
- Compliance score (0-100)
- Detailed issue breakdown
- Markdown reports
- Grade system (GOLD/SILVER/BRONZE)

---

## ğŸ“¦ Installation

### Step 1: Copy Files

Place these files in your project:

```
src/
  â”œâ”€â”€ LeeWayAuditSystem.ts    (audit engine + header generator)
  â””â”€â”€ leeway-audit.ts          (CLI tool)
```

### Step 2: Add npm Scripts

In `package.json`, add:

```json
{
  "scripts": {
    "leeway:audit": "tsx src/leeway-audit.ts",
    "leeway:fix": "tsx src/leeway-audit.ts --fix",
    "leeway:report": "tsx src/leeway-audit.ts --report",
    "prebuild": "npm run leeway:audit"
  }
}
```

### Step 3: Install Dependencies (if needed)

```bash
npm install tsx --save-dev
```

---

## ğŸš€ Usage

### 1. Run Audit (Read-Only)

```bash
npm run leeway:audit
```

**Output:**
```
ğŸ” LEEWAY Compliance Audit
ğŸ“‚ Directory: B:\AgenticOperatingSystem

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š LEEWAY COMPLIANCE REPORT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸŸ¡ Overall Compliance Score: 72/100
ğŸ“„ Files Audited: 145
âœ… Compliant Files: 89 (61%)
âŒ Non-Compliant: 56

Issues Found:
  ğŸ”´ Missing Headers: 42
  ğŸ”´ Invalid TAGs: 8
  ğŸŸ¡ Missing REGIONs: 14
  ğŸ”§ Auto-Fixable: 56

Grade: BRONZE ğŸ¥‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ Tip: Run with --fix to auto-correct 56 files
```

---

### 2. Auto-Fix Non-Compliant Files

```bash
npm run leeway:fix
```

**Output:**
```
ğŸ”§ Auto-fixing non-compliant files...

Found 56 files to fix:

  âœ… Fixed: src/components/AgentLee.tsx
  âœ… Fixed: src/utils/LocalModelHub.ts
  âœ… Fixed: src/pages/Dashboard.tsx
  ...

âœ… Fixed 56 files!
ğŸ’¡ Run audit again to verify fixes.
```

---

### 3. Generate Detailed Report

```bash
npm run leeway:report
```

Creates `LEEWAY_COMPLIANCE_REPORT.md` with:
- Full issue list per file
- Severity levels
- Fix suggestions
- Timestamp

---

## ğŸ¯ What Gets Fixed

### Before (Non-Compliant)

```typescript
// src/components/VisionTest.tsx

import React from 'react';

export const VisionTest = () => {
  return <div>Hello</div>;
};
```

### After (Auto-Fixed)

```typescript
/* ============================================================================
   LEEWAY HEADER â€” DO NOT REMOVE
   PROFILE: LEEWAY-ORDER
   TAG: UI.COMPONENT.VISIONTEST.MAIN
   REGION: ğŸ”µ UI
   VERSION: 1.0.0
   ============================================================================
   VisionTest.tsx
   
   DISCOVERY_PIPELINE:
     MODEL=Voice>Intent>Location>Vertical>Ranking>Render;
     ROLE=support;
     INTENT_SCOPE=n/a;
     LOCATION_DEP=none;
     VERTICALS=n/a;
     RENDER_SURFACE=in-app;
     SPEC_REF=LEEWAY.v12.DiscoveryArchitecture

   SPDX-License-Identifier: MIT
   ============================================================================ */

import React from 'react';

export const VisionTest = () => {
  return <div>Hello</div>;
};
```

---

## ğŸ§  Smart TAG Inference

The system automatically infers TAGs based on file location:

| File Pattern | Inferred TAG |
|-------------|-------------|
| `/components/*.tsx` | `UI.COMPONENT.{NAME}.MAIN` |
| `/pages/*.tsx` | `UI.PUBLIC.PAGE.{NAME}` |
| `/ai/*` or `*Model*` | `AI.ORCHESTRATION.MODEL.LOADER` |
| `/data/*` or `*Store*` | `DATA.LOCAL.STORE.MAIN` |
| `*config*` | `CORE.CONFIG.RUNTIME.ENV` |
| `/tools/*` | `TOOLS.{TYPE}.{NAME}.MAIN` |

**Override:** Manually edit the TAG if the inference is incorrect.

---

## ğŸ¨ Smart REGION Assignment

Regions are inferred from directories:

| Directory | REGION |
|-----------|--------|
| `/ui/`, `/components/` | ğŸ”µ UI |
| `/ai/`, `/model/` | ğŸ§  AI |
| `/data/`, `/store/` | ğŸ’¾ DATA |
| `/seo/` | ğŸ”´ SEO |
| `/mcp/` | ğŸŸ£ MCP |
| `/tools/`, `/scripts/` | ğŸŸ  UTIL |
| `/core/`, `/config/` | ğŸŸ¢ CORE |

---

## ğŸ“Š Compliance Grading

| Score | Grade | Status |
|-------|-------|--------|
| 95-100 | GOLD âœ¨ | Production-ready |
| 85-94 | SILVER ğŸ¥ˆ | Good |
| 70-84 | BRONZE ğŸ¥‰ | Needs improvement |
| 0-69 | NON-COMPLIANT âŒ | Critical issues |

---

## ğŸ”§ Advanced Usage

### Custom Directory

```bash
tsx src/leeway-audit.ts --dir ./specific-folder
```

### Verbose Output

```bash
npm run leeway:audit -- --verbose
```

### CI/CD Integration

```yaml
# .github/workflows/leeway-audit.yml
name: LEEWAY Compliance
on: [push, pull_request]

jobs:
  audit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm install
      - run: npm run leeway:audit
```

**Result:** CI fails if compliance score < 70

---

## ğŸš¨ Common Issues & Fixes

### Issue 1: "Invalid TAG format"

**Cause:** TAG doesn't follow `DOMAIN.SUBDOMAIN.ASSET.PURPOSE` pattern

**Fix:**
```typescript
// âŒ Bad
TAG: MyComponent

// âœ… Good
TAG: UI.COMPONENT.MY_COMPONENT.MAIN
```

### Issue 2: "Invalid REGION"

**Cause:** REGION doesn't match allowed emoji prefixes

**Fix:**
```typescript
// âŒ Bad
REGION: CORE

// âœ… Good
REGION: ğŸŸ¢ CORE
```

### Issue 3: "Missing DISCOVERY_PIPELINE"

**Cause:** Public-facing files need discovery metadata

**Fix:** Run `--fix` to auto-add stub, then customize if needed.

---

## ğŸ“‹ Checklist for Manual Review

After auto-fix, verify these:

- [ ] TAG accurately describes the file's purpose
- [ ] REGION matches the file's functional area
- [ ] DISCOVERY_PIPELINE `ROLE` is correct (`support` vs `direct`)
- [ ] Public pages have expanded discovery fields (SCHEMAS, VOICE_QA, ANALYTICS)
- [ ] VERSION number is appropriate (use semantic versioning)

---

## ğŸ“ LEEWAY Standards Reference

### TAG Format

```
DOMAIN.SUBDOMAIN.ASSET.PURPOSE[.VARIANT]
```

**Example:**
```
AI.ORCHESTRATION.VISION.MULTI_ONNX_LOADER
â””â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚         â”‚           â”‚             â””â”€ PURPOSE
  â”‚         â”‚           â””â”€ ASSET (what it is)
  â”‚         â””â”€ SUBDOMAIN (functional area)
  â””â”€ DOMAIN (top-level category)
```

### Valid Domains
`CORE`, `UI`, `DATA`, `AI`, `MCP`, `SEO`, `ANALYTICS`, `SECURITY`, `PERF`, `DOC`, `TOOLS`, `OPS`

### Valid Regions
`ğŸŸ¢ CORE`, `ğŸ”´ SEO`, `ğŸ”µ UI`, `ğŸŸ£ MCP`, `ğŸ§  AI`, `ğŸ’¾ DATA`, `ğŸŸ  UTIL`, `ğŸŸ¡ PY`

---

## ğŸ’¡ Pro Tips

1. **Run audit before commits**: Add to pre-commit hook
2. **Fix incrementally**: Use `--fix` on directories one at a time
3. **Review auto-fixes**: Check git diff before committing
4. **Customize TAGs**: Auto-inference is a starting point, not gospel
5. **Document exceptions**: Add comments for intentionally non-compliant files

---

## ğŸ”— Related Files

- `B:\AgenticOperatingSystem\LeeWayStandards\` - Full LEEWAY documentation
- `leeway.config.json` - Project-specific overrides
- `LEEWAY_COMPLIANCE_REPORT.md` - Generated audit reports

---

## ğŸ¯ Next Steps

1. **Run initial audit**: `npm run leeway:audit`
2. **Review report**: Check `LEEWAY_COMPLIANCE_REPORT.md`
3. **Auto-fix bulk issues**: `npm run leeway:fix`
4. **Manual cleanup**: Review and customize TAGs/REGIONs
5. **Verify compliance**: Re-run audit
6. **Add to CI**: Enforce in build pipeline

**Goal**: Achieve GOLD (95+) compliance across all files.

---

Good luck! ğŸš€